# Relational Database Service (RDS)

#### Scaling

Remember that RDSs do not scale well for the following reasons:
* It normalizes data nad stores it on multiple tables that require multiple queries to write to disk
* It generally incyrs the performance costs of an ACID-compliant transaction system
* It uses expensive joins to reassemble

Mutli-AZ data replication is *synchronous*
Read replica data replication is *asynchronous*

##### Security

You can authenticate to your DB Instance using IAM DB Authentication. This way you dont need to use a password to connect to eh DB. Instead you use an Auth Token.
This works with MySQL & PostgreSQL.
An Auth Token is a uniqe string generated by Amazon RDS.
Auth tokens generated using AWS Signature v4.
Each tokeb has a lifetime of 15mins.

IAM DB Auth provides:
1. Network traffic to and from the DB is encrypted using SSL
2. IAM can be used to centrally manage access to your DB resources, instead of managing access individually on each DB
3. For apps running on EC2, you can use profile creds specific to your EC2 instance to access a DB, instead of a password.

#### Monitoring

RDS provides metrics in real time forthe operating system (OS) that your DB instance runs on.
In RDS you can enable Enhanced Monitoring which stores logs in CloudWtach for 30 days.
NB:
* CloudWatch gathers metrics about CU utilization from the hypervisor for a DB instance;
* Enhanced Monitoring gathers its metrics from an agent on the instance.

#### Failover

In Amazon RDS, failover is automatically handled so that you cna resume DB operations as quickly as possible without administrative intervention in the event that your primary DB instance went down. When failing over, Amazon RDS simply flips the canonical name record (CNAME) for your DB instance to point at the standby, which is in turn promoted to become the new primary.

#### Aurora

Aurora typically involves a cluster of DB instances instead of a single instance. Each connection is handled by a specific DB instance. When you connect to an Aurora cluster, the host name and port that you specify point to an intermediate handler called an **endpoint**. Aurora uses the endpoint mechanism to abstract these connections. Thus, you don't have to hardcode all the hostnames or write your own logic for load-balancing and rerouting connections when some DB instances aren't available.

For certain Aurora tasks, different instances or groups of instances perform different roles. For example, the primary instance handles all data definition language (DDL) and data manipulation language (DML) statements. Up to 15 Aurora Replicas handle read-only query traffic.

Using endpoints you can map each connection to the appropriate instance or group of instances based on your use case.

The custom endpoint provides load-balanced database connections based on criteria other than the read-only or read-write capability of the DB instances.

A *reader endpoint* for an Aurora DB cluster provides load-balancing support for read-only connections to the DB cluster. Use the reader endpoint for read operations, such as queries. By processing those statements on the read-only Aurora Replicas, this endpoint reduces the overhead on the primary instance. It also helps the cluster to scale the capacity to handle simultaneous `SELECT` queries, proportional to the number of Aurora Replicas in the cluster. Each Aurora DB cluster has one reader endpoint.

If the cluster contains one or more Aurora Replicas, the reader endpoing load-balances each connection request among the Aurora Replicas. In that case, you can only perform read-only statements such as `SELECT` in that session. If the cluster only contains a primary instance and no Aurora Replicas, the reader endpoint connects to the primary isntance. In that case, you can perform write operations through the endpoint.

#### Read Replicas

Amazon RDS Read Replicas provide enhanced performance and durability for database (DB) instances. This feature makes it easy to eastically scel out beyond the capacity constraints of a single DB instance for read-heavy database workloads.

You can create one or more replicas of a given source DB instance and serve high-volume application read traffic from multiple copies of your data, thereby increasing aggregate read throughput. Read replicase can also be promoted when needed to become standalone DB instances. Read replicas are available in Amazon RDS for MySQL, MariaDB, Oracle and PostgreSQL, as well as Amazon Aurora.

Read replicas provide elasticity to your Amazon RDS database and improves performance of the primary database by taking workload from it.
